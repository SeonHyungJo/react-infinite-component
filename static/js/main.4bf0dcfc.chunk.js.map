{"version":3,"sources":["../../node_modules/use-intersect/dist/index.es.js","../../node_modules/style-inject/dist/style-inject.es.js","../../src/index.tsx","util/index.js","App.js","index.js"],"names":["initalOptions","root","rootMargin","threshold","onIntersect","_a","observer","rootOptions","_b","once","targetRef","observerOptions","window","observer_1","IntersectionObserver","entries","forEach","entry","isIntersecting","target","unobserve","active_1","observedList_1","threshold_1","observer_2","setTimeout","targetEle","getBoundingClientRect","top","bottom","upThreshold","innerHeight","getComputedStyle","display","filter","diffObserve","length","document","removeEventListener","addEventListener","observe","setElement","push","intersectionObserver","current","css","ref","insertAt","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","loadingFunc","hasMore","id","className","customLoader","children","infiniteDiv","usrIntersect","loader","styles","fetchData","start","limit","product","list","slice","App","state","startIdx","itemList","moreFlag","handleLoading","newItemList","setState","prevState","this","src","map","item","key","Component","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.4bf0dcfc.chunk.js","sourcesContent":["import { useRef, useEffect } from 'react';\n\nvar intersectionObserver = function (onIntersect, _a) {\r\n    var observerOptions = _a.observerOptions, once = _a.once;\r\n    if (\"IntersectionObserver\" in window) {\r\n        var observer_1 = new IntersectionObserver(function (entries) {\r\n            entries.forEach(function (entry) {\r\n                if (entry.isIntersecting) {\r\n                    onIntersect(entry.target);\r\n                    if (once) {\r\n                        observer_1.unobserve(entry.target);\r\n                    }\r\n                }\r\n            });\r\n        }, observerOptions);\r\n        return observer_1;\r\n    }\r\n    else {\r\n        var active_1 = false;\r\n        var observedList_1 = [];\r\n        var _b = observerOptions.threshold, threshold_1 = _b === void 0 ? 0 : _b;\r\n        var observer_2 = function () {\r\n            if (active_1 === false) {\r\n                active_1 = true;\r\n                setTimeout(function () {\r\n                    observedList_1.forEach(function (targetEle) {\r\n                        var _a = targetEle.getBoundingClientRect(), top = _a.top, bottom = _a.bottom;\r\n                        var downThreshold = top + (bottom - top) * threshold_1;\r\n                        var upThreshold = top + (bottom - top) * (1 - threshold_1);\r\n                        var thresholdChecking = (top >= 0 && downThreshold <= window.innerHeight && bottom >= 0)\r\n                            || (upThreshold >= 0 && bottom <= window.innerHeight);\r\n                        if (thresholdChecking && getComputedStyle(targetEle).display !== \"none\") {\r\n                            onIntersect(targetEle);\r\n                            if (once) {\r\n                                observedList_1 = observedList_1.filter(function (diffObserve) {\r\n                                    return diffObserve !== targetEle;\r\n                                });\r\n                                if (observedList_1.length === 0) {\r\n                                    document.removeEventListener(\"scroll\", observer_2);\r\n                                    window.removeEventListener(\"resize\", observer_2);\r\n                                    window.removeEventListener(\"orientationchange\", observer_2);\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n                    active_1 = false;\r\n                }, 200);\r\n            }\r\n        };\r\n        document.addEventListener(\"scroll\", observer_2);\r\n        window.addEventListener(\"resize\", observer_2);\r\n        window.addEventListener(\"orientationchange\", observer_2);\r\n        return {\r\n            observe: function (setElement) {\r\n                observedList_1.push(setElement);\r\n            }\r\n        };\r\n    }\r\n};\n\nvar initalOptions = {\r\n    root: null,\r\n    rootMargin: \"0px\",\r\n    threshold: 0\r\n};\r\nvar useIntersect = function (onIntersect, _a) {\r\n    var rootOptions = _a.rootOptions, _b = _a.once, once = _b === void 0 ? true : _b;\r\n    var targetRef = useRef();\r\n    var observerOptions = rootOptions || initalOptions;\r\n    var observer;\r\n    useEffect(function () {\r\n        observer = intersectionObserver(onIntersect, { observerOptions: observerOptions, once: once });\r\n    });\r\n    useEffect(function () {\r\n        if (targetRef !== null) {\r\n            observer.observe(targetRef.current);\r\n        }\r\n    }, [targetRef]);\r\n    return targetRef;\r\n};\n\nexport default useIntersect;\n//# sourceMappingURL=index.es.js.map\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from \"react\";\nimport usrIntersect from \"use-intersect\";\n\nimport styles from \"./styles.css\";\n\nexport type Props = {\n  loadingFunc: Function;\n  hasMore: boolean;\n  id?: string;\n  className?: string;\n  style?: object;\n  loader?: Element;\n  children?: React.ReactNode;\n};\n\nconst defaultLoader = \"Loading....\";\n\nconst InfiniteScroll = ({\n  loadingFunc,\n  hasMore = false,\n  id,\n  className,\n  style,\n  loader: customLoader,\n  children\n}: Props) => {\n  const infiniteDiv = hasMore\n    ? usrIntersect(loadingFunc, { once: false })\n    : null;\n  const loader = customLoader || defaultLoader;\n\n  return (\n    <div id={id} className={className || styles.defaultInfinite} style={style}>\n      {children}\n      {hasMore && <div ref={infiniteDiv}>{loader}</div>}\n    </div>\n  );\n};\n\nexport default InfiniteScroll;\n","import product from './item.json'\n\nexport const fetchData = (start, limit) => {\n    return product.list.slice(start, start + limit)\n}\n\n","import React, { Component } from 'react'\n\nimport InfiniteScroll from 'react-infinite-component'\nimport LazyImg from 'react-lazy-loading-image'\nimport { fetchData } from './util'\n\nconst ITEM_START_IDX = 4\nconst ITEM_LIMIT = 5\n\nexport default class App extends Component {\n  state = {\n    startIdx: ITEM_START_IDX,\n    itemList: [],\n    moreFlag: true\n  }\n\n  handleLoading = () => {\n    setTimeout(() => {\n      const newItemList = fetchData(this.state.startIdx, ITEM_LIMIT)\n\n      this.setState((prevState) => {\n        return {\n          ...prevState,\n          startIdx: prevState.startIdx + ITEM_LIMIT,\n          itemList: [...prevState.itemList, ...newItemList],\n          moreFlag: !(newItemList.length < ITEM_LIMIT)\n        }\n      })\n    }, 0)\n  }\n\n  render() {\n    return (\n      <div>\n        <InfiniteScroll loadingFunc={this.handleLoading} hasMore={this.state.moreFlag} loader={<h4>로딩 중...</h4>}>\n          <img src='https://images.unsplash.com/photo-1578763713067-ab058f88be3a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=300&ixlib=rb-1.2.1&q=80&w=400' className={\"innerDiv\"} />\n          <img src='https://images.unsplash.com/photo-1578483001364-b508612cde4a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=300&ixlib=rb-1.2.1&q=80&w=400' className={\"innerDiv\"} />\n          <img src='https://images.unsplash.com/photo-1579783135819-bbc4905aa3a5?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=300&ixlib=rb-1.2.1&q=80&w=400' className={\"innerDiv\"} />\n          <img src='https://images.unsplash.com/photo-1578763713067-ab058f88be3a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=300&ixlib=rb-1.2.1&q=80&w=400' className={\"innerDiv\"} />\n          <img src='https://images.unsplash.com/photo-1578483001364-b508612cde4a?crop=entropy&cs=tinysrgb&fit=crop&fm=jpg&h=300&ixlib=rb-1.2.1&q=80&w=400' className={\"innerDiv\"} />\n          {\n            this.state.itemList.map((item) => {\n              return (\n                <LazyImg key={item.id} className=\"innerDiv\" src={item.src} />\n              )\n            })\n          }\n        </InfiniteScroll>\n      </div>\n    )\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\n\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}